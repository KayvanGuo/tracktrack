L.BoatIcon=L.Icon.extend({options:{iconSize:new L.Point(47,47),className:"leaflet-canvas-icon",course:0,x:15,y:35,x_fac:.18,y_fac:.18,color:"#8ED6FF",labelAnchor:[23,0]},ctx:null,lastHeading:0,createIcon:function(){var e=document.createElement("canvas");this._setIconStyles(e,"icon");var t=this.options.iconSize;e.width=t.x;e.height=t.y;this.ctx=e.getContext("2d");this.draw(e.getContext("2d"),t.x,t.y);return e},createShadow:function(){return null},draw:function(e,t,n){if(!e)return;var r=this.options.x;var i=this.options.y;var s=this.options.x_fac;var o=this.options.y_fac;e.clearRect(0,0,t,n);e.translate(t/2,n/2);e.rotate(this.options.course*Math.PI/180);e.translate(-t/2,-n/2);e.beginPath();e.moveTo(r,i);e.bezierCurveTo(r,i+80*o,r+100*s,i+80*o,r+100*s,i);e.quadraticCurveTo(r+100*s,i-100*o,r+50*s,i-200*o);e.quadraticCurveTo(r,i-100*o,r,i);e.fillStyle=this.options.color;e.fill();e.stroke();e.closePath()},setHeading:function(e){this.options.course=e%360-this.lastHeading;this.lastHeading=e%360;var t=this.options.iconSize;this.draw(this.ctx,t.x,t.y)}});L.BoatMarker=L.Marker.extend({setHeading:function(e){this.options.icon.setHeading(e)}});L.boatMarker=function(e,t){var n="color"in t?t.color:"#f1c40f";t.icon=new L.BoatIcon({color:n});return new L.BoatMarker(e,t)}